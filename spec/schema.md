# DiagnosticsSnapshot JSON Schema (Draft)

## Top-Level
- `version` (string)
- `target` (object)
  - `pid` (integer, optional)
  - `command` (string, optional)
- `system` (object)
  - `loadavg` (object)
    - `one` (number)
    - `five` (number)
    - `fifteen` (number)
  - `meminfo` (object)
    - `mem_total_kb` (integer)
    - `mem_free_kb` (integer)
    - `mem_available_kb` (integer)
- `processes` (array of objects)
  - `pid` (integer)
  - `ppid` (integer)
  - `cmd` (string)
  - `rss_kb` (integer)
  - `vsz_kb` (integer)
  - `cpu_percent` (number)
  - `mem_percent` (number)
  - `etime` (string)
- `valgrind` (object)
  - `errors` (array of objects)
    - `kind` (string)
    - `count` (integer)
  - `leak_summary` (object)
    - `definitely_lost_kb` (integer)
    - `indirectly_lost_kb` (integer)
    - `possibly_lost_kb` (integer)
    - `still_reachable_kb` (integer)
- `perf` (object)
  - `hotspots` (array of objects)
    - `symbol` (string)
    - `percent` (number)
- `strace` (object)
  - `top_syscalls` (array of objects)
    - `name` (string)
    - `count` (integer)
    - `time_ms` (number)
  - `slow_syscalls` (array of objects)
    - `name` (string)
    - `duration_ms` (number)
- `io` (array of objects)
  - `pid` (integer)
  - `read_bytes` (integer)
  - `write_bytes` (integer)
- `timing` (object)
  - `captured_at` (string, ISO-8601)
- `quality` (object)
  - `collectors` (array of objects)
    - `name` (string)
    - `status` (string: `ok|partial|failed|disabled`)
    - `error` (string, optional)

## Notes
- All numeric sizes are in kilobytes unless otherwise stated.
- Fields may be omitted if the collector is disabled or fails; `quality` must reflect this.
